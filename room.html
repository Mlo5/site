<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุงูุฏุฑุฏุดุฉ ุงูุนุงูุฉ - M L O 5</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;800&family=Tajawal:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./chat/css/room.css" />
</head>

<body>
  <div id="siteBgLayer"></div>

  <main class="page">
    <div class="wrap">

      <!-- ===== Left: Online ===== -->
      <section class="card sideCard" id="sideCard">
        <div class="panel-head">
          <div class="h">
            <b>ุงููุชูุงุฌุฏูู</b>
            <span class="sub">๐ฅ <span id="onlineCount">0</span></span>
          </div>
          <div style="display:flex;align-items:center;gap:8px;justify-content:flex-end">
            <div class="badge" id="meBadge">ุฃูุช</div>
          </div>
        </div>

        <div class="sideBody">
          <select id="statusSelect" title="ุงูุญุงูุฉ" disabled>
            <option value="online">ูุชุตู</option>
            <option value="away">ุจุนูุฏ</option>
            <option value="busy">ูุดุบูู</option>
            <option value="gaming">ููุนุจ</option>
          </select>

          <div id="onlineList" class="onlineList"></div>
        </div>
      </section>

      <!-- ===== Right: Chat ===== -->
      <section class="card chatCard">
        <div class="panel-head">
          <div class="h">
            <b>ุงูุฏุฑุฏุดุฉ ุงูุนุงูุฉ</b>
            <span id="chatHint">ุฏุฑุฏุด ูุฎูู ุงูุดุจุงุจ <span style="color:#facc15">ุชุณุชูุงุฏ</span></span>
          </div>
          <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:flex-end">
            <button class="badgeBtn" id="openOnlineBtn" type="button" title="ุนุฑุถ ุงููุชูุงุฌุฏูู">๐ฅ ุงููุชูุงุฌุฏูู</button>
            <div class="badge" id="micStatusBadge">๐ค ุงููุงูู: ูุชุงุญ</div>
            <div class="badge" id="ignoreCount">ุชุฌุงูู: 0</div>
          </div>
        </div>

        <div class="chatSplit" id="chatSplit">
          <div class="chatCol">
            <div id="messages"></div>

            <div class="replyPreview" id="replyPreview">
              <div style="min-width:0">
                <b id="replyPreviewName">ุฑุฏ ุนูู:</b>
                <div><span id="replyPreviewText"></span></div>
              </div>
              <button class="replyCancel" id="replyCancelBtn" type="button" title="ุฅูุบุงุก">โ</button>
            </div>

            <form id="chatForm" class="composer">
              <input id="msgInput" placeholder="ุงูุชุจ ุฑุณุงูุชู." autocomplete="off" disabled enterkeyhint="send" />

              <!-- ๐ค NEW -->
              <button class="micBtn" id="micBtn" type="button" title="ุชุญุฏุซ / ุงุชุฑู ุงููุงูู">๐ค</button>

              <button class="adminClearBtn" id="adminClearBtn" type="button" title="ูุณุญ ุงูุดุงุช ููุฌููุน">๐งน</button>
              <button class="emojiBtn" id="emojiBtn" type="button" title="ุฅูููุฌู">๐</button>
              <button class="sendBtn" id="sendBtn" type="submit" disabled>ุฅุฑุณุงู</button>
            </form>
          </div>
        </div>

        <div class="emojiPicker" id="emojiPicker" aria-hidden="true">
          <div class="emojiGrid" id="emojiGrid"></div>
        </div>
      </section>
    </div>
  </main>

  <!-- ===== Modal login ===== -->
  <div id="modal">
    <div id="modalBox">
      <div class="modalGrid">
        <div class="modalCard">
          <button class="homeBackBtn" id="homeBtn" type="button" title="ุงูุฑุฌูุน ููููู">๐</button>
          <button class="backListBtn" id="backListBtn" type="button" title="ุฑุฌูุน">โฉ</button>

          <h3>ุงูุฏุฎูู ุฅูู ุงูุดุงุช</h3>
          <p>( ููุง ููููููุธู ูููู ูููููู ุฅููุง ููุฏููููู ุฑููููุจู ุนูุชููุฏู )</p>

          <div class="choiceRow">
            <button class="choiceBtn" id="chooseLogin" type="button">๐ ุชุณุฌูู ุฏุฎูู</button>
            <button class="choiceBtn" id="chooseGuest" type="button">๐ค ุงูุฏุฎูู ูุถูู</button>
          </div>

          <div id="formBox" style="display:none;">
            <div class="modalRow one">
              <div class="nameWrap">
                <input id="nameInput" placeholder="ุงุณูู (3+)" />
              </div>
            </div>

            <div class="modalRow">
              <select id="genderInput">
                <option value="">ุงูุฌูุณ</option>
                <option value="male">ุฐูุฑ</option>
                <option value="female">ุฃูุซู</option>
              </select>
              <input id="ageInput" type="number" min="10" max="99" placeholder="ุงูุนูุฑ (10+)" />
            </div>

            <div class="modalRow one">
              <select id="countryInput" title="ุงูุฏููุฉ">
                <option value="">ุงูุฏููุฉ</option>
                <option value="JO">๐ฏ๐ด ุงูุฃุฑุฏู</option>
                <option value="SA">๐ธ๐ฆ ุงูุณุนูุฏูุฉ</option>
                <option value="AE">๐ฆ๐ช ุงูุฅูุงุฑุงุช</option>
                <option value="KW">๐ฐ๐ผ ุงููููุช</option>
                <option value="QA">๐ถ๐ฆ ูุทุฑ</option>
                <option value="BH">๐ง๐ญ ุงูุจุญุฑูู</option>
                <option value="EG">๐ช๐ฌ ูุตุฑ</option>
                <option value="IQ">๐ฎ๐ถ ุงูุนุฑุงู</option>
                <option value="SY">๐ธ๐พ ุณูุฑูุง</option>
                <option value="LB">๐ฑ๐ง ูุจูุงู</option>
                <option value="PS">๐ต๐ธ ููุณุทูู</option>
                <option value="MA">๐ฒ๐ฆ ุงููุบุฑุจ</option>
                <option value="TN">๐น๐ณ ุชููุณ</option>
                <option value="DZ">๐ฉ๐ฟ ุงูุฌุฒุงุฆุฑ</option>
              </select>
            </div>

            <div class="colorRow">
              <div class="colorBox">
                <span>ููู ุงูุงุณู</span>
                <input id="nameColor" type="color" value="#facc15" />
              </div>
              <div class="colorBox">
                <span>ููู ุงููุต</span>
                <input id="textColor" type="color" value="#f9fafb" />
              </div>
            </div>

            <button id="enterBtn" class="modalBtn" type="button">ุฏุฎูู</button>
            <div class="hintErr" id="modalErr"></div>
          </div>
        </div>

        <div class="modalCard">
          <h3>ADMIN</h3>

          <div class="modalRow one">
            <input id="adminUser" placeholder="Username" autocomplete="off" />
          </div>
          <div class="modalRow one">
            <input id="adminPass" placeholder="Password" type="password" autocomplete="off" />
          </div>

          <button id="adminLoginBtn" class="modalBtn" type="button">ุชูุนูู ุงูุฃุฏูู</button>
          <div class="hintErr" id="adminErr"></div>

          <div class="adminNote">
            ุฃุดูุงุก ุดูู ุฎุงุตุฉ ุญุจูุจู โจ๐ฅฑ.<br>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- App modal -->
  <div id="appModal">
    <div id="appModalBox">
      <div class="appModalTitle" id="appModalTitle">ุชูุจูู</div>
      <div class="appModalText" id="appModalText">โ</div>
      <div class="appModalActions" id="appModalActions"></div>
    </div>
  </div>

  <!-- ctx menu -->
  <div class="menu" id="ctxMenu">
    <div id="modActions" style="display:none;">
      <button id="ctxKickBtn">๐ช ุทุฑุฏ</button>
      <button id="ctxMuteBtn">๐ ูุชู</button>
      <button id="ctxUnmuteBtn">๐ ุฅูุบุงุก ุงููุชู</button>
      <button id="ctxBanBtn">โ ุญุธุฑ</button>
      <button id="ctxUnbanBtn">โ ุฅูุบุงุก ุงูุญุธุฑ</button>

      <!-- ๐ค NEW -->
      <button id="ctxGiveMicBtn">๐ค ุฅุนุทุงุก ุงููุงูู</button>

      <div class="sep"></div>
    </div>

    <div id="rankActions" style="display:none;">
      <button id="ctxRankLegend">โก Legendary</button>
      <button id="ctxRankVip">๐ VIP</button>
      <button id="ctxRankRoot">๐ก๏ธ ROOT</button>
      <button id="ctxRankGirl">๐ GIRL</button>
      <button id="ctxRankNone">๐งฝ ุฅุฒุงูุฉ ุงูุฑุชุจุฉ</button>
    </div>
  </div>

  <!-- room menu -->
  <div class="menu" id="roomMenu">
    <button id="roomLockBtn">๐ ููู ุงูุฑูู</button>
    <button id="roomUnlockBtn">๐ ูุชุญ ุงูุฑูู</button>

    <div class="sep"></div>
    <button id="selfMuteBtn">๐ ูุชู ููุณู</button>
    <button id="selfUnmuteBtn">๐ ูู ูุชู ููุณู</button>

    <div class="sep"></div>
    <button id="micExtendBtn">โฑ๏ธ +5 ุฏูุงุฆู ูููุงูู</button>
    <button id="micOpenBtn">โพ๏ธ ูุงูู ููุชูุญ</button>
    <button id="micTakeBtn">โ ุณุญุจ / ุชุฑู ุงููุงูู</button>

    <!-- global backgrounds -->
    <div class="sep"></div>
    <button id="bg1Btn">๐ผ๏ธ ุฎูููุฉ 1</button>
    <button id="bg2Btn">๐ผ๏ธ ุฎูููุฉ 2</button>
    <button id="bg3Btn">๐ผ๏ธ ุฎูููุฉ 3</button>
    <button id="bg0Btn">๐งฝ ุฅุฒุงูุฉ ุงูุฎูููุฉ</button>
  </div>

  <!-- Themes Menu -->
  <div class="menu" id="themeMenu" aria-hidden="true">
    <button class="themePick" data-theme="dark">๐ Default (Dark)</button>
    <button class="themePick" data-theme="white">โช White</button>
    <button class="themePick" data-theme="pink">๐ธ Pink</button>
    <button class="themePick" data-theme="blue">๐ต Blue</button>
    <button class="themePick" data-theme="anime">โจ Anime</button>
    <button class="themePick" data-theme="gradient">๐ Gradient</button>

    <div class="sep"></div>
    <button class="themePick" data-theme="rank" data-req="rank">๐ท๏ธ Rank Exclusive</button>
    <button class="themePick" data-theme="adminGlobal" data-req="admin">๐ก๏ธ Admin Global</button>
  </div>

  <script type="module" src="./chat/js/room.js"></script>
</body>
</html>
